<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Automation - TPASYSTEMS</title>
    <link href="../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../js/jquery-3.2.1.min.js"></script>
    <script src="../js/bootstrap-3.3.7.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Git/GitHub", url: "#_top", children: [
              {title: "Overview", url: "#overview" },
              {title: "Basic Commands", url: "#basic-commands" },
              {title: "Add Files to staging area", url: "#add-files-to-staging-area" },
          ]},
          {title: "Ansible", url: "#ansible", children: [
              {title: "Inventory", url: "#inventory" },
              {title: "Ansible Modules", url: "#ansible-modules" },
              {title: "Playbooks", url: "#playbooks" },
          ]},
          {title: "Ansible AWX", url: "#ansible-awx", children: [
              {title: "GUI", url: "#gui" },
          ]},
          {title: "YAML", url: "#yaml", children: [
              {title: "Basics", url: "#basics_1" },
          ]},
        ];

    </script>
    <script src="../js/base.js"></script>
      <script src="../search/main.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../py_basics/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../py_basics/" class="btn btn-xs btn-link">
        Python Basics
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../architecture/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../architecture/" class="btn btn-xs btn-link">
        Architecture
      </a>
    </div>
    
  </div>

    

    <h1 id="gitgithub">Git/GitHub</h1>
<h2 id="overview">Overview</h2>
<ul>
<li>Keeps track of code history</li>
<li>Takes "snapshots" of your files</li>
<li>You decide when to take a snapshot by making a "commit"</li>
<li>You can visit any snapshot at any time</li>
<li>You can stage files before committing</li>
</ul>
<h2 id="basic-commands">Basic Commands</h2>
<p>Initialize local Git Repository. Goto the folder you want to be a repo.</p>
<pre><code class="bash">$ git init
</code></pre>

<p>To unitialize a directory. Delete the .git file that's created in the command above</p>
<pre><code class="bash">$ rm -rf .git
</code></pre>

<p>For best practice you should attached your name and email to a created repo.</p>
<pre><code class="bash">$ git config --global user.name '&lt;username&gt;'
$ git config --global user.email '&lt;email&gt;'
</code></pre>

<h2 id="add-files-to-staging-area">Add Files to staging area</h2>
<pre><code class="bash">$ git add &lt;file&gt;
$ git add *.&lt;file extension&gt;
$ git add .
</code></pre>

<p>Remove Files from staging area</p>
<pre><code class="bash">$ git rm &lt;file&gt;
</code></pre>

<p>To force remove if there's multiple staged versions</p>
<pre><code class="bash">$ git rm &lt;file&gt; -f
</code></pre>

<p>To remove a file from the staging area but not from the filesystem</p>
<pre><code class="bash">$ git rm &lt;file&gt; --cached
</code></pre>

<p>To backup the state of your working directory</p>
<pre><code class="bash">$ git stash
</code></pre>

<p>Bring it back in</p>
<pre><code class="bash">$ git stash pop
$ git stash apply
</code></pre>

<p>Check status of Working Tree</p>
<pre><code class="bash">$ git status
</code></pre>

<p>To see a short version of the above</p>
<pre><code class="bash">$ git status -s
</code></pre>

<p>To see changes between the working directory and staging area</p>
<pre><code class="bash">$ git diff
</code></pre>

<p>To show differences between staging area and Local Repository</p>
<pre><code class="bash">$ git diff HEAD
</code></pre>

<h3 id="commit-changes-to-index">Commit changes to Index</h3>
<p>This will then bring up an editor to comment on the changes. You need to unhash and write a message.  </p>
<pre><code class="bash">$ git commit
</code></pre>

<p>This bypasses doing it in an editor</p>
<pre><code class="bash">$ git commit -m '&lt;comment&gt;' 
</code></pre>

<p>Shortcut which stages and commits at the same time.</p>
<pre><code class="bash">% git commit –am '&lt;comment&gt;'
</code></pre>

<p>To see what changes have been submitted</p>
<pre><code class="bash">$ git log
</code></pre>

<p>Revert your commit changes<br />
You can get the hash value from the log command.</p>
<pre><code class="bash">$ git revert &lt;hash&gt;
</code></pre>

<p>Push to remote repository (Github)</p>
<pre><code class="bash">$ git push
</code></pre>

<p>Pull latest from remote repository</p>
<pre><code class="bash">$ git pull
</code></pre>

<p>Clone repository into a new directory</p>
<pre><code class="bash">$ git clone
</code></pre>

<p>Create a file via git (not sure how this is any different)</p>
<pre><code class="bash">$ touch &lt;file.extention&gt;
</code></pre>

<h3 id="basics">Basics</h3>
<p>Local Operations<br />
<a href="../img/git1.png">Image</a></p>
<p>Remote Operations
<a href="img/git2.png">Image</a></p>
<h3 id="exempt-filesfolders">Exempt files/folders</h3>
<p>To ignore files or folders from being included you need to create a file called '.gitignore'</p>
<pre><code class="bash">$ touch .gitignore
</code></pre>

<p>Creates the file. You then just list the files or folders you want to exempt.<br />
To specify directory end the file with <code>/</code><br />
<code>foldername/</code><br />
To ignore a file (to it's not ignored) start the line with <code>!</code><br />
<code>!file5.txt</code></p>
<h3 id="branch">Branch</h3>
<p>To move away from the master branch we can create a branch that allows you to work on files at the same time as other people without affecting their work. It creates a fork that you later remerge.</p>
<p>Create a branch</p>
<pre><code class="bash">$ git branch &lt;custom name of branch&gt;
</code></pre>

<p>To switch to a branch</p>
<pre><code class="bash">$ git checkout &lt;branch name&gt;
</code></pre>

<p>If you create files in a branch and switch to master they will disappear. Also the changes made to the file will also disappear unless you merge.</p>
<p>Delete branch<br />
When you are finished with a branch best practice is to get rid of it</p>
<pre><code class="bash">$ git branch –d &lt;branch name&gt;
</code></pre>

<p>Merge</p>
<pre><code class="bash">$ git merge &lt;branch name&gt;
</code></pre>

<h3 id="remote-repository">Remote Repository</h3>
<p>Create a new directory in linux first.</p>
<pre><code class="bash">$ mkdir &lt;folder&gt;
$ cd &lt;folder&gt;
</code></pre>

<p>Initialize the folder</p>
<pre><code class="bash">$ git init
</code></pre>

<p>Add a remote repository</p>
<pre><code class="bash">$ git remote add origin &lt;https address&gt;
</code></pre>

<p>To confirm status of repo</p>
<pre><code class="bash">$ git remote 
</code></pre>

<p>Pull the content from the remote repo</p>
<pre><code class="bash">$ git pull origin master
</code></pre>

<p>Push content back to github</p>
<pre><code class="bash">$ git push origin master
</code></pre>

<p>Check difference between local and server</p>
<pre><code class="bash">git diff --stat --cached origin/master
</code></pre>

<p>If pulling from an existing repository<br />
<code>fatal: refusing to merge unrelated histories</code></p>
<pre><code class="bash">$ git pull origin master --allow-unrelated-histories
</code></pre>

<p>To pull (clone) of a remote directory to our local drive
This essentially adds the origin and does a pull all in one.</p>
<pre><code class="bash">$ git clone
</code></pre>

<h1 id="ansible">Ansible</h1>
<ul>
<li>Task execution engine</li>
<li>Code can be written in JSON or YAML</li>
<li>Define desired configuration </li>
<li>Run playbooks of code.</li>
</ul>
<p>Control Node: Where Ansible is installed. (Usually linux)<br />
Managed Node: Is the end device or host that ansible logs into.</p>
<h3 id="inventory">Inventory</h3>
<ul>
<li>Is a list of hosts where ansible logs into to action commands.</li>
<li>Can be a static file or dynamic file (Python script).</li>
<li>Can be an INI file or YAML file</li>
<li>Default hosts file is saved in /etc/ansible/hosts</li>
<li>You can always deleted the default host file and create a specific one in the folder of your config.</li>
<li>docs.ansible.com - Working with Inventory</li>
</ul>
<h3 id="ansible-modules">Ansible Modules</h3>
<ul>
<li>A module is the unit of code that Ansible executes</li>
<li>There are modules for every common task</li>
<li>From managing VLAN interfaces to creating VMWare hosts.</li>
<li>docs.ansible.com - Working with Modules</li>
<li>You can write your own modules</li>
</ul>
<h3 id="playbooks">Playbooks</h3>
<ul>
<li>Playbooks are expressed in YAML format</li>
<li>Each playbook consists of one or more plays</li>
<li>Plays are collections of tasks</li>
</ul>
<p>To run a playbook, move to the folder the playbook is located and then issue the command</p>
<pre><code class="bash">ansible-playbook &lt;playbook name&gt;.yml
</code></pre>

<p>To run playbook using different ansible username</p>
<pre><code class="bash">ansible-playbook playbook.yml -u &lt;user&gt; -k (prompts for password)
</code></pre>

<p>Limit playbook to run on a single device</p>
<pre><code class="bash">ansible-playbook playbook.yml --limit &lt;devicename&gt;
</code></pre>

<p>The default ansible configuration file is located <code>/etc/ansible/ansible.cfg</code><br />
You can create another <code>ansible.cfg</code> file in the folder of your configuration which will be read first before the default is executed.  </p>
<p>To test connectivity to the nodes</p>
<pre><code class="bash">sudo ansible all -m ping -u automation -k
</code></pre>

<p>Specific node</p>
<pre><code class="bash">sudo ansible all -m ping -u automation -k
</code></pre>

<p>Using Ansible to access nodes through Jump hosts<br />
<a href="https://docs.ansible.com/ansible/latest/reference_appendices/faq.html#how-do-i-configure-a-jump-host-to-access-servers-that-i-have-no-direct-access-to">Read more here</a></p>
<p>List all hosts in local inventory file.</p>
<pre><code class="bash">ansible all -i inventory --list-hosts

cat /etc/sudoers.d/ansible
ansible aLL=(ALL) NOPASSWD:ALL
</code></pre>

<h1 id="ansible-awx">Ansible AWX</h1>
<pre><code class="bash">sudo systemctl disable --now firewalld

sudo sudoyum install epel-release

sudo yum install epel-release#
sudo setenforce 0

sudo yum install docker-ce docker-ce-cli containerd.io ---nobest
sudo usermod -aG docker $(whoami)
newgrp docker

cd  ~/awx/installer; ansible-playbook -i inventory install.yml


cd /etc/hosts
&lt;IP&gt; &lt;FQDN&gt; &lt;seperate_name&gt;
</code></pre>

<h3 id="gui">GUI</h3>
<p>Credential is the account used to log into the devices<br />
<code>Templates</code> - <code>Job type</code> - <code>Run/Check</code> </p>
<p><a href="https://docs.ansible.com/ansible-tower/latest/html/administration/tipsandtricks.html">Read more</a></p>
<h1 id="yaml">YAML</h1>
<p>YAML is a data serialisation language designed to be directly writable and readable by humans.<br />
YAML doesn’t allow literal tab characters for indentation.<br />
Can use either <code>.yml</code> or <code>.yaml</code></p>
<h2 id="basics_1">Basics</h2>
<h3 id="key-value-pairs">Key Value Pairs</h3>
<h3 id="string">String</h3>
<pre><code class="yaml">name1: Bob
name2: 'Tyson'
name3: &quot;Richard&quot;
</code></pre>

<h3 id="integer-numbers">Integer (Numbers)</h3>
<pre><code class="yaml">age: 30
</code></pre>

<h3 id="floating-numbers">Floating Numbers</h3>
<pre><code class="yaml">height: 5.11
</code></pre>

<h3 id="exponential-numbers">Exponential Numbers</h3>
<pre><code class="yaml">fav_num: 1e+10
</code></pre>

<h3 id="boolean">Boolean</h3>
<pre><code class="yaml">male: true
</code></pre>

<h3 id="date-using-the-iso-8601-standard">Date (Using the ISO 8601 standard)</h3>
<pre><code class="yaml">birthday: 1988-01-15 17:15:01
</code></pre>

<h3 id="null-value-the-key-doesnt-have-a-value">Null value (The key doesn't have a value)</h3>
<pre><code class="yaml">flaws: null
</code></pre>

<p>To store a series of date you can do so within an object. Todo this you just indent everything.</p>
<pre><code class="yaml">person:
 name4: Bob
 age: 30
 height: 5.11
 male: true
 birthday: 1988-01-15 17:15:01
</code></pre>

<h3 id="lists">Lists</h3>
<p>Everything in the list is hyphenated</p>
<pre><code class="yaml">Hobbies:
  - Rugby
  - Cricket
  - Computing
  - Tennis
  - Cooking
#You can also display lists (Array) on a single line
top_movies: [Armageddon, Basic, Star Wars]
</code></pre>

<h3 id="lists-of-objects">Lists of objects</h3>
<pre><code class="yaml">friends:
  - name: karen
    age: 34
</code></pre>

<p>You can also define the above on a single line</p>
<pre><code class="yaml">  - {name: karen, age: 34}
#Or
  -
    name: karen
    age: 34
</code></pre>

<p>To render alot of data on a single line you can break it up across multiple lines but YAML will read it as one line.</p>
<pre><code class="yaml">    description: &gt;
      Stephen C. Johnson a computer scientist at Bell Labs came up
      with lint in 1978 while debugging the yacc grammar he was
      writing for C and dealing with portability issues stemming from
      porting Unix to a 32-bit machine.
</code></pre>

<p>To preserve formatting</p>
<pre><code class="yaml">    signature: |
      Tony Robinson
        TPASystems
      email - tony@tpasystems.co.uk
</code></pre>

<h3 id="anchoring">Anchoring.</h3>
<p>Anchor a value and use it elsewhere</p>
<pre><code class="yaml">person2:
  name: &amp;name22 Brian
id_name: *name22
</code></pre>

<h3 id="anchor-key-value-pair">Anchor Key Value Pair</h3>
<pre><code class="yaml">base: &amp;base
  var1: value1
bases:
  &lt;&lt;: *base
</code></pre>

<h3 id="convert-data-type">Convert Data Type</h3>
<pre><code class="yaml">weight: !!str 85
</code></pre>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../py_basics/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../py_basics/" class="btn btn-xs btn-link">
        Python Basics
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../architecture/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../architecture/" class="btn btn-xs btn-link">
        Architecture
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="col-md-12 wm-page-content">
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="">Windmill Dark</a> theme by None (noraj).</p>
</footer>

</body>
</html>